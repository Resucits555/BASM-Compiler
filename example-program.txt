section .bss
	extern dword STD_OUTPUT_HANDLE


section .rdata
	qword msg = "hello, world!"


section .text
	extern GetStdHandle
	extern WriteConsoleA


	global main:
	mov rcx, msg ; buffer
	mov rdx, 13  ; msglen
	call rel Print
	retn


	static Print:
	push rdx
	push rcx
	mov ecx, -11 ; getting STDOUT
	call rel GetStdHandle

	mov rcx, rax ; STDOUT
	pop rdx      ; buffer
	pop r8       ; to write (msglen)
	mov r9d, 0   ; not used (characters written)
	call rel WriteConsoleA
	retn